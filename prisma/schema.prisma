// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model MapType {
    prefix String @id @db.VarChar(16)

    date_added  DateTime
    is_official Boolean  @default(true)
    type        String   @db.VarChar(64)

    maps Map[]

    entry_created_at DateTime @default(now())
    entry_updated_at DateTime @updatedAt
}

model Map {
    map_name String @id @db.VarChar(64)

    dateAdded      DateTime
    description    String   @db.Text
    is_official    Boolean  @default(true)
    is_pyro_vision Boolean
    setting        String   @db.VarChar(255)

    developers Developer[]

    // map_images MapImage[]

    map_type_prefix String
    mapType         MapType @relation(fields: [map_type_prefix], references: [prefix])

    entry_created_at DateTime @default(now())
    entry_updated_at DateTime @updatedAt
}

// model MapImage {
//     id String @id @default(uuid())

//     description String @db.VarChar(255)
//     url         String @db.VarChar(256)

//     map_name String
//     map      Map    @relation(fields: [map_name], references: [map_name])

//     entry_created_at DateTime @default(now())
//     entry_updated_at DateTime @updatedAt
// }

model Developer {
    id String @id @db.VarChar(64)

    name String @db.VarChar(64)
    link String @db.VarChar(256)

    maps Map[]

    entry_created_at DateTime @default(now())
    entry_updated_at DateTime @updatedAt
}
